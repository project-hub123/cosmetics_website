<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∫–æ—Å–º–µ—Ç–∏–∫–∏{% endblock %}</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/reset.css') }}">
    {% if style_mode == "lowvision" %}
        <link rel="stylesheet" href="{{ url_for('static', filename='css/lowvision.css') }}">
    {% else %}
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% endif %}

    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

<header>
    <div class="container">

        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div class="logo">
                <a href="{{ url_for('main.index') }}" style="text-decoration:none;">
                    üå∏ –ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∞–Ω–∏—è
                </a>
            </div>

            <button id="toggle-style" class="btn" style="font-size:14px;">
                {% if style_mode == "lowvision" %}
                    –û–±—ã—á–Ω–∞—è –≤–µ—Ä—Å–∏—è
                {% else %}
                    –í–µ—Ä—Å–∏—è –¥–ª—è —Å–ª–∞–±–æ–≤–∏–¥—è—â–∏—Ö
                {% endif %}
            </button>
        </div>

        <!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
        <nav style="display:flex; align-items:center; gap:20px; flex-wrap:wrap;">
            <a href="{{ url_for('main.index') }}">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="{{ url_for('articles.categories') }}">–°—Ç–∞—Ç—å–∏</a>
            <a href="{{ url_for('news.news_list') }}">–ù–æ–≤–æ—Å—Ç–∏</a>
            <a href="{{ url_for('main.contacts') }}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
            <a href="{{ url_for('main.sitemap') }}">–ö–∞—Ä—Ç–∞ —Å–∞–π—Ç–∞</a>

            {% if current_user.is_authenticated %}
                <a href="{{ url_for('auth.logout') }}">–í—ã—Ö–æ–¥</a>
                <span style="font-weight:bold;">{{ current_user.username }}</span>

                {% if current_user.role in ["employee", "admin"] %}
                    <a href="{{ url_for('admin.users_list') }}">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
                {% endif %}
            {% else %}
                <a href="{{ url_for('auth.login') }}">–í—Ö–æ–¥</a>
                <a href="{{ url_for('auth.register') }}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
            {% endif %}

            <!-- –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –§–û–†–ú–ê –ü–û–ò–°–ö–ê -->
            <form action="{{ url_for('main.search') }}" method="GET" class="search-form">
                <input type="text" name="query" placeholder="–ü–æ–∏—Å–∫..." required>
                <button type="submit">–ù–∞–π—Ç–∏</button>
            </form>

        </nav>
    </div>
</header>

<!-- FLASH -->
<div class="container">
    {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
            {% for category, msg in messages %}
                <div class="flash flash-{{ category }}">{{ msg }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
</div>

<!-- CONTENT -->
<div class="container">
    {% block content %}{% endblock %}
</div>

<footer>
    <div class="container">
        ¬© {{ current_year }} –ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∞–Ω–∏—è ‚Ä¢ –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã
    </div>
</footer>

<script src="{{ url_for('static', filename='js/toggle_style.js') }}"></script>
<script src="{{ url_for('static', filename='js/script.js') }}"></script>

</body>
</html>
